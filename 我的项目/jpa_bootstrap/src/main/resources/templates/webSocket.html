<!DOCTYPE html>
<html lang="en">
<head>
    <script type="application/javascript" src="../static/js/jquery-3.3.1.min.js"></script>
    <script type="application/javascript" src="../static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="icon" href="../static/img/icon.jpg" type="image/x-icon">

    <meta charset="UTF-8">
    <title>websocket</title>
</head>
<body>
<div class="container">
    <h5>websocket</h5>
    <label for="text">输入框</label>
    <input id="text" type="text" class="input-sm" placeholder="text">
    <a class="btn btn-warning" href="javascript:send()">send</a>
    <button onclick=""></button>
</div>
<script>
    var web = null;
    if ("WebSocket" in window) {
        console.log("浏览器支持 websocket");
        web = new WebSocket('ws://localhost:8080/websocket');
    } else {
        alert("该浏览器不支持websocket")
    }

    web.onopen = function (ev) {
        web.send("发送数据");
        console.info(ev);
        console.log("数据发送中！！")
    };
    web.onmessage = function (ev) {
        var recevied_msg = ev.data;
        console.log(recevied_msg);
    };
    web.onclose = function (ev) {
        alert("连接关闭");
    };
    function send() {
        web.send($("#text").val());
    }
    function close() {
        web.close();
    }

    var demo = function (name, something) {
        this.name = name;
        this.something = something;
    };
    demo.prototype.showName = function(){
        alert("函数调用" + this.name)
    }
    var p1 = new demo('name', 'something');
    p1.showName();
</script>
</body>
</html>